@startuml
left to right direction
skinparam nodesep 50
skinparam ranksep 130


actor "用户" as user

package "前端界面" {
  [浏览器UI] as UI
}

package "Shell接口" {
  [ShellController] as shellCtl
  [Shell解释器] as shell
}

package "进程管理" {
  [调度器] as sched
  [CPU核心] as cpu
}

package "内存管理" {
  [MemoryManagement] as memMgmt
}

package "文件系统" {
  [文件系统] as fs
}

package "设备管理" {
  [设备管理器] as devMgr
}

package "快照与日志" {
  [快照服务] as snapEmit
  [日志服务] as logEmit
}

' 用户与系统交互
user --> UI : 输入命令
UI --> shellCtl : HTTP 请求
shellCtl --> shell : 解析并执行命令

' Shell 请求模块服务
shell --> sched : 创建/终止进程
shell --> memMgmt : 查询内存
shell --> fs : 文件操作
shell --> devMgr : 设备操作

' CPU 执行进程
sched --> cpu : 分配进程执行
cpu --> memMgmt : 访存
cpu --> fs : 文件读写
cpu --> devMgr : I/O 请求

' 日志与快照
sched ..> snapEmit : 状态快照
memMgmt ..> snapEmit
fs ..> snapEmit
devMgr ..> snapEmit
[所有模块] ..> logEmit : 输出日志
[所有模块] --> [中断处理] : 请求中断处理
logEmit -> UI : 推送日志
snapEmit -> UI : 推送快照
@enduml
